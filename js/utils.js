const anzhiyu={debounce:(e,t=0,n=!1)=>{let o;return(...a)=>{const s=n&&!o;clearTimeout(o),o=setTimeout(()=>{o=null,n||e(...a)},t),s&&e(...a)}},throttle:function(e,t,n={}){let o,a,s,i=0;const c=()=>{i=!1===n.leading?0:(new Date).getTime(),o=null,e.apply(a,s),o||(a=s=null)};return(...l)=>{const r=(new Date).getTime();i||!1!==n.leading||(i=r);const u=t-(r-i);a=this,s=l,u<=0||u>t?(o&&(clearTimeout(o),o=null),i=r,e.apply(a,s),o||(a=s=null)):o||!1===n.trailing||(o=setTimeout(c,u))}},sidebarPaddingR:()=>{const e=window.innerWidth,t=document.body.clientWidth,n=e-t;e!==t&&(document.body.style.paddingRight=n+"px")},snackbarShow:(e,t=!1,n=2e3,o=!1)=>{const{position:a,bgLight:s,bgDark:i}=GLOBAL_CONFIG.Snackbar,c="light"===document.documentElement.getAttribute("data-theme")?s:i;document.querySelector(":root").style.setProperty("--anzhiyu-snackbar-time",n+"ms"),Snackbar.show({text:e,backgroundColor:c,onActionClick:t,actionText:o,showAction:o,duration:n,pos:a,customClass:"snackbar-css"})},loadComment:(e,t)=>{if("IntersectionObserver"in window){const n=new IntersectionObserver(e=>{e[0].isIntersecting&&(t(),n.disconnect())},{threshold:[0]});n.observe(e)}else t()},scrollToDest:(e,t=500)=>{const n=window.pageYOffset;if("scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});let o=null;e=+e,window.requestAnimationFrame(function a(s){o=o||s;const i=s-o;n<e?window.scrollTo(0,(e-n)*i/t+n):window.scrollTo(0,n-(n-e)*i/t),i<t?window.requestAnimationFrame(a):window.scrollTo(0,e)})},initJustifiedGallery:function(e){const t=e=>{anzhiyu.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:e.getAttribute("data-rowHeight"),gutter:4,onJustify:function(){this.$container.style.opacity="1"}})};0===Array.from(e).length?t(e):e.forEach(e=>{t(e)})},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{e.addEventListener("animationend",function t(){e.style.display="",e.style.animation="",e.removeEventListener("animationend",t)}),e.style.animation=t},wrap:(e,t,n)=>{const o=document.createElement(t);for(const[e,t]of Object.entries(n))o.setAttribute(e,t);e.parentNode.insertBefore(o,e),o.appendChild(e)},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,n=e.offsetParent;for(;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if("mediumZoom"===t){const t=mediumZoom(e);t.on("open",e=>{const n="dark"===document.documentElement.getAttribute("data-theme")?"#121212":"#fff";t.update({background:n})})}"fancybox"===t&&(Array.from(e).forEach(e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,n=e.title||e.alt||"";anzhiyu.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":n,"data-thumb":t})}}),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1}}),window.fancyboxRun=!0))},setLoading:{add:e=>{e.insertAdjacentHTML("afterend",'\n        <div class="loading-container">\n          <div class="loading-item">\n            <div></div><div></div><div></div><div></div><div></div>\n          </div>\n        </div>\n      ')},remove:e=>{e.nextElementSibling.remove()}},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(e,t)=>{const n=t.clientHeight,o=document.documentElement.clientHeight,a=(e-t.offsetTop)/(n>o?n-o:document.documentElement.scrollHeight-o),s=Math.round(100*a);return s>100?100:s<=0?0:s},addGlobalFn:(e,t,n=!1,o=window)=>{const a=o.globalFn||{},s=a[e]||{};n&&s[n]||(s[n=n||Object.keys(s).length]=t,a[e]=s,o.globalFn=a)},addEventListenerPjax:(e,t,n,o=!1)=>{e.addEventListener(t,n,o),anzhiyu.addGlobalFn("pjax",()=>{e.removeEventListener(t,n,o)})},removeGlobalFnEvent:(e,t=window)=>{const{globalFn:n={}}=t,o=n[e]||{},a=Object.keys(o);a.length&&(a.forEach(e=>{o[e]()}),delete t.globalFn[e])},changeThemeMetaColor:function(e){null!==themeColorMeta&&themeColorMeta.setAttribute("content",e)},initThemeColor:function(){let e=getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-bar-background").trim().replace('"',"").replace('"',"");if((window.scrollY||document.documentElement.scrollTop)>26){if(anzhiyu.is_Post()&&(e=getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-meta-theme-post-color").trim().replace('"',"").replace('"',"")),themeColorMeta.getAttribute("content")===e)return;this.changeThemeMetaColor(e)}else{if(themeColorMeta.getAttribute("content")===e)return;this.changeThemeMetaColor(e)}},is_Post:function(){return window.location.href.indexOf("/posts/")>=0},addNavBackgroundInit:function(){var e=0,t=0;$bodyWrap&&(e=$bodyWrap.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),0!=(e-t>0?e:t)&&(pageHeaderEl.classList.add("nav-fixed"),pageHeaderEl.classList.add("nav-visible"))},downloadImage:function(e,t){rm.hideRightMenu(),0==rm.downloadimging?(rm.downloadimging=!0,anzhiyu.snackbarShow("正在下载中，请稍后",!1,1e4),setTimeout(function(){let n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){let e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0,n.width,n.height);let o=e.toDataURL("image/png"),a=document.createElement("a"),s=new MouseEvent("click");a.download=t||"photo",a.href=o,a.dispatchEvent(s)},n.src=e,anzhiyu.snackbarShow("图片已添加盲水印，请遵守版权协议"),rm.downloadimging=!1},"10000")):anzhiyu.snackbarShow("有正在进行中的下载，请稍后再试")},stopImgRightDrag:function(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++)e[t].addEventListener("dragstart",function(){return!1})},scrollTo:function(e){var t=document.querySelector(e).offsetTop;window.scrollTo(0,t-80)},hideAsideBtn:()=>{const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("aside-status","show",2):saveToLocal.set("aside-status","hide",2),e.toggle("hide-aside"),e.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},switchCommentBarrage:function(){let e=document.querySelector(".comment-barrage");e&&("flex"===window.getComputedStyle(e).display?(e.style.display="none",anzhiyu.snackbarShow("✨ 已关闭评论弹幕"),document.querySelector(".menu-commentBarrage-text").textContent="显示热评",document.querySelector("#consoleCommentBarrage").classList.remove("on"),localStorage.setItem("commentBarrageSwitch","false")):(e.style.display="flex",document.querySelector(".menu-commentBarrage-text").textContent="关闭热评",document.querySelector("#consoleCommentBarrage").classList.add("on"),anzhiyu.snackbarShow("✨ 已开启评论弹幕"),localStorage.removeItem("commentBarrageSwitch"))),rm&&rm.hideRightMenu()},initPaginationObserver:()=>{const e=document.getElementById("post-comment"),t=document.getElementById("pagination");e&&t&&new IntersectionObserver(e=>{const n=document.querySelector(".comment-barrage");e.forEach(e=>{e.isIntersecting?(t.classList.add("show-window"),n&&(n.style.bottom="-200px")):(t.classList.remove("show-window"),n&&(n.style.bottom="0px"))})}).observe(e)},initIndexEssay:function(){document.getElementById("bbTimeList")&&setTimeout(()=>{let e=new Swiper(".essay_bar_swiper_container",{passiveListeners:!0,direction:"vertical",loop:!0,autoplay:{disableOnInteraction:!0,delay:3e3},mousewheel:!0}),t=document.getElementById("bbtalk");null!==t&&(t.onmouseenter=function(){e.autoplay.stop()},t.onmouseleave=function(){e.autoplay.start()})},100)},scrollByMouseWheel:function(e,t){e.addEventListener("mousewheel",function(t){e.scrollLeft-=t.wheelDelta/2,t.preventDefault()},{passive:!1}),t&&(t.classList.add("selected"),e.scrollLeft=t.offsetLeft-e.offsetLeft-(e.offsetWidth-t.offsetWidth)/2)},catalogActive:function(){const e=document.getElementById("catalog-list");if(e){const t=decodeURIComponent(window.location.pathname),n=e.querySelectorAll(".catalog-list-item");let o=null;n.forEach(e=>{t.startsWith(e.id)&&(o=e)}),anzhiyu.scrollByMouseWheel(e,o)}},tagsPageActive:function(){const e=document.getElementById("tag-page-tags");if(e){const t=document.getElementById(decodeURIComponent(window.location.pathname));anzhiyu.scrollByMouseWheel(e,t)}},diffDate:function(e,t=!1,n=!1){const o=new Date,a=new Date(e),s=o.getTime()-a.getTime(),i=6e4,c=36e5,l=24*c,r=30*l;let u;if(t){const e=s/l,t=s/c,n=s/i;u=s/r>=1?a.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.day:t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.hour:n>=1?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else if(n){const e=s/l,t=s/c,n=s/i;u=s/r>=1?a.toLocaleDateString().replace(/\//g,"-"):e>=1&&e<=3?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.day:e>3?a.getMonth()+1+"/"+a.getDate():t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.hour:n>=1?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else u=parseInt(s/l);return u},changeTimeInEssay:function(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach(function(e){var t=e,n=t.getAttribute("datetime");t.innerText=anzhiyu.diffDate(n,!0),t.style.display="inline"})},changeTimeInAlbumDetail:function(){document.querySelector("#album_detail")&&document.querySelectorAll("#album_detail time").forEach(function(e){var t=e,n=t.getAttribute("datetime");t.innerText=anzhiyu.diffDate(n,!0),t.style.display="inline"})},reflashEssayWaterFall:function(){const e=document.getElementById("waterfall");e&&setTimeout(function(){waterfall(e),e.classList.add("show")},800)},sayhi:function(){const e=document.getElementById("author-info__sayhi");e&&(e.innerHTML=(()=>{const e=(new Date).getHours();let t="";return e>=0&&e<=5?t="睡个好觉，保证精力充沛":e>5&&e<=10?t="一日之计在于晨":e>10&&e<=14?t="吃饱了才有力气干活":e>14&&e<=18?t="集中精力，攻克难关":e>18&&e<=24&&(t="不要太劳累了，早睡更健康"),t})())},addFriendLink(){var e=document.getElementsByClassName("el-textarea__inner")[0];if(!e)return;const t=new Event("input",{cancelable:!0,bubbles:!0});e.value=this.getConfigIfPresent(GLOBAL_CONFIG.linkPageTop,"addFriendPlaceholder","昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"),e.dispatchEvent(t),e.focus(),e.setSelectionRange(-1,-1)},getConfigIfPresent:function(e,t,n){return e&&e.hasOwnProperty(t)&&e[t]?e[t]:n},musicToggle:function(e=!0){anzhiyu_musicFirst||(anzhiyu.musicBindEvent(),anzhiyu_musicFirst=!0);anzhiyu_musicPlaying?(navMusicEl.classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span>',document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#consoleMusic").classList.remove("on"),anzhiyu_musicPlaying=!1,navMusicEl.classList.remove("stretch")):(navMusicEl.classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="anzhiyufont anzhiyu-icon-pause"></i><span>暂停音乐</span>',document.querySelector("#consoleMusic").classList.add("on"),anzhiyu_musicPlaying=!0,navMusicEl.classList.add("stretch")),e&&document.querySelector("#nav-music meting-js").aplayer.toggle(),rm&&rm.hideRightMenu()},musicTelescopic:function(){navMusicEl.classList.contains("stretch")?navMusicEl.classList.remove("stretch"):navMusicEl.classList.add("stretch")},musicSkipBack:function(){navMusicEl.querySelector("meting-js").aplayer.skipBack(),rm&&rm.hideRightMenu()},musicSkipForward:function(){navMusicEl.querySelector("meting-js").aplayer.skipForward(),rm&&rm.hideRightMenu()},musicGetName:function(){for(var e=document.querySelectorAll(".aplayer-title"),t=[],n=e.length-1;n>=0;n--)t[n]=e[n].innerText;return t[0]},initConsoleState:function(){document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},rewardShowConsole:function(){consoleEl.classList.add("reward-show"),anzhiyu.initConsoleState()},showConsole:function(){consoleEl.classList.add("show"),anzhiyu.initConsoleState()},hideConsole:function(){consoleEl.classList.contains("show")?consoleEl.classList.remove("show"):consoleEl.classList.contains("reward-show")&&consoleEl.classList.remove("reward-show");const e=document.getElementById("center-console");e.checked&&(e.checked=!1)},hideLoading:function(){document.getElementById("loading-box").classList.add("loaded")},cacheAndPlayMusic(){let e=localStorage.getItem("musicData");if(e){e=JSON.parse(e);if((new Date).getTime()-e.timestamp<864e5)return void anzhiyu.playMusic(e.songs)}fetch("/json/music.json").then(e=>e.json()).then(e=>{const t={timestamp:(new Date).getTime(),songs:e};localStorage.setItem("musicData",JSON.stringify(t)),anzhiyu.playMusic(e)})},playMusic(e){const t=document.getElementById("anMusic-page").querySelector("meting-js").aplayer,n=e[Math.floor(Math.random()*e.length)],o=t.list.audios;if(selectRandomSong.includes(n.name)){let a=!1;for(;!a;){const n=e[Math.floor(Math.random()*e.length)];if(selectRandomSong.includes(n.name)||(t.list.add([n]),t.list.switch(o.length),selectRandomSong.push(n.name),a=!0),selectRandomSong.length===e.length)break}if(!a){const e=o.findIndex(e=>e.name===n.name);-1!=e&&t.list.switch(e)}}else t.list.add([n]),t.list.switch(o.length),selectRandomSong.push(n.name);console.info("已随机歌曲：",selectRandomSong,"本次随机歌曲：",n.name)},changeMusicBg:function(e=!0){const t=document.getElementById("an_music_bg");if(e){const e=document.querySelector("#anMusic-page .aplayer-pic");t.style.backgroundImage=e.style.backgroundImage}else{let e=setInterval(()=>{document.querySelector("#anMusic-page .aplayer-pic")&&(clearInterval(e),anzhiyu.addEventListenerMusic(),anzhiyu.changeMusicBg(),document.querySelector("#nav-music meting-js").aplayer&&!document.querySelector("#nav-music meting-js").aplayer.audio.paused&&anzhiyu.musicToggle())},100)}},getCustomPlayList:function(){if(!window.location.pathname.startsWith("/music/"))return;const e=new URLSearchParams(window.location.search),t=document.getElementById("anMusic-page-meting");if(e.get("id")&&e.get("server")){const n=e.get("id"),o=e.get("server");t.innerHTML=`<meting-js id="${n}" server=${o} type="playlist" type="playlist" mutex="true" preload="auto" theme="var(--anzhiyu-main)" order="list" list-max-height="calc(100vh - 169px)!important"></meting-js>`}else t.innerHTML='<meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="auto" theme="var(--anzhiyu-main)" order="list" list-max-height="calc(100vh - 169px)!important"></meting-js>';anzhiyu.changeMusicBg(!1)},hideTodayCard:function(){if(document.getElementById("todayCard")){document.getElementById("todayCard").classList.add("hide");document.querySelector(".topGroup").querySelectorAll(".recent-post-item").forEach(e=>{e.style.display="flex"})}},addEventListenerMusic:function(){const e=document.getElementById("anMusic-page"),t=e.querySelector(".aplayer-info .aplayer-time .aplayer-icon-menu"),n=e.querySelector("#anMusicBtnGetSong"),o=e.querySelector("#anMusicRefreshBtn"),a=e.querySelector("#anMusicSwitching"),s=e.querySelector("meting-js").aplayer;s.volume(.8,!0),s.on("loadeddata",function(){anzhiyu.changeMusicBg()}),t.addEventListener("click",function(){document.getElementById("menu-mask").style.display="block",document.getElementById("menu-mask").style.animation="0.5s ease 0s 1 normal none running to_show",e.querySelector(".aplayer.aplayer-withlist .aplayer-list").style.opacity="1"}),document.getElementById("menu-mask").addEventListener("click",function t(){"/music/"==window.location.pathname?e.querySelector(".aplayer-list").classList.remove("aplayer-list-hide"):document.getElementById("menu-mask").removeEventListener("click",t)}),n.addEventListener("click",()=>{if(changeMusicListFlag){const e=document.getElementById("anMusic-page").querySelector("meting-js").aplayer,t=e.list.audios,n=Math.floor(Math.random()*t.length);e.list.switch(n)}else anzhiyu.cacheAndPlayMusic()}),o.addEventListener("click",()=>{localStorage.removeItem("musicData"),anzhiyu.snackbarShow("已移除相关缓存歌曲")}),a.addEventListener("click",()=>{anzhiyu.changeMusicList()}),"custom"===GLOBAL_CONFIG.music_page_default&&anzhiyu.changeMusicList(),document.addEventListener("keydown",function(e){"Space"===e.code&&(e.preventDefault(),s.toggle()),39===e.keyCode&&(e.preventDefault(),s.skipForward()),37===e.keyCode&&(e.preventDefault(),s.skipBack()),38===e.keyCode&&musicVolume<=1&&(musicVolume+=.1,s.volume(musicVolume,!0)),40===e.keyCode&&musicVolume>=0&&(musicVolume+=-.1,s.volume(musicVolume,!0))})},changeMusicList:async function(){const e=document.getElementById("anMusic-page").querySelector("meting-js").aplayer,t=(new Date).getTime(),n=JSON.parse(localStorage.getItem("musicData"))||{timestamp:0};let o=[];if(changeMusicListFlag)o=defaultPlayMusicList;else if(defaultPlayMusicList=e.list.audios,t-n.timestamp<864e5)o=n.songs;else{const e=await fetch("/json/music.json");o=await e.json(),n.timestamp=t,n.songs=o,localStorage.setItem("musicData",JSON.stringify(n))}e.list.clear(),e.list.add(o),changeMusicListFlag=!changeMusicListFlag},addEventListenerConsoleMusicList:function(){const e=document.getElementById("nav-music");e&&e.addEventListener("click",t=>{const n=e.querySelector(".aplayer-list"),o=e.querySelector("div.aplayer-info > div.aplayer-controller > div.aplayer-time.aplayer-time-narrow > button.aplayer-icon.aplayer-icon-menu svg");t.target!=o&&n.classList.contains("aplayer-list-hide")&&n.classList.remove("aplayer-list-hide")})},toPage:function(){var e=document.getElementById("toPageText"),t=document.getElementById("toPageButton"),n=document.querySelectorAll(".page-number"),o=Number(n[n.length-1].innerHTML),a=Number(e.value);if(!isNaN(a)&&a>=1&&Number.isInteger(a)){var s="/page/"+(a>o?o:a)+"/";t.href=1===a?"/":s}else t.href="javascript:void(0);"},removeBodyPaceClass:function(){document.body.className="pace-done"},setValueToBodyType:function(){const e=document.getElementById("page-type").value;document.body.dataset.type=e},addRandomCommentInfo:function(){const e=`${adjectives[Math.floor(Math.random()*adjectives.length)]}${vegetablesAndFruits[Math.floor(Math.random()*vegetablesAndFruits.length)]}`;!function(){for(var t=["#author","input[name='comname']","#inpName","input[name='author']","#ds-dialog-name","#name","input[name='nick']","#comment_author"],n=["#mail","#email","input[name='commail']","#inpEmail","input[name='email']","#ds-dialog-email","input[name='mail']","#comment_email"],o=0;o<t.length;o++){var a=document.querySelector(t[o]);if(null!=a){a.value=e,a.dispatchEvent(new Event("input")),a.dispatchEvent(new Event("change"));break}}for(var s=0;s<n.length;s++){var i=document.querySelector(n[s]);if(null!=i){i.value=visitorMail,i.dispatchEvent(new Event("input")),i.dispatchEvent(new Event("change"));break}}}();var t=document.getElementsByClassName("el-textarea__inner")[0];t.focus(),t.setSelectionRange(-1,-1)},totraveling:function(){anzhiyu.snackbarShow("即将跳转到「开往」项目的成员博客，不保证跳转网站的安全性和可用性",e=>{e.style.opacity=0,travellingsTimer&&clearTimeout(travellingsTimer)},5e3,"取消"),travellingsTimer=setTimeout(function(){window.open("https://www.travellings.cn/go.html","_blank")},"5000")},replaceAll:function(e,t,n){return e.split(t).join(n)},musicBindEvent:function(){document.querySelector("#nav-music .aplayer-music").addEventListener("click",function(){anzhiyu.musicTelescopic()}),document.querySelector("#nav-music .aplayer-button").addEventListener("click",function(){anzhiyu.musicToggle(!1)})},hasMobile:function(){let e=!1;return(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||document.body.clientWidth<800)&&(e=!0),e},qrcodeCreate:function(){if(document.getElementById("qrcode")){document.getElementById("qrcode").innerHTML="";new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:250,height:250,colorDark:"#000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}},isInViewPortOfOne:function(e){if(!e)return;const t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return e.offsetTop-document.documentElement.scrollTop<=t},addRewardMask:function(){document.querySelector(".reward-main")&&(document.querySelector(".reward-main").style.display="flex",document.querySelector(".reward-main").style.zIndex="102",document.getElementById("quit-box").style.display="flex")},removeRewardMask:function(){document.querySelector(".reward-main")&&(document.querySelector(".reward-main").style.display="none",document.getElementById("quit-box").style.display="none")},keyboardToggle:function(){const e=anzhiyu_keyboard;if(e){document.querySelector("#consoleKeyboard").classList.remove("on"),anzhiyu_keyboard=!1}else{document.querySelector("#consoleKeyboard").classList.add("on"),anzhiyu_keyboard=!0}localStorage.setItem("keyboardToggle",e?"false":"true")},rightMenuToggle:function(){window.oncontextmenu?window.oncontextmenu=null:!window.oncontextmenu&&oncontextmenuFunction&&(window.oncontextmenu=oncontextmenuFunction)},switchConsole:()=>{const e=document.getElementById("console");document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on"),e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show");const t=document.querySelector("#consoleKeyboard");t&&("true"===localStorage.getItem("keyboardToggle")?(t.classList.add("on"),anzhiyu_keyboard=!0):(t.classList.remove("on"),anzhiyu_keyboard=!1))},intersectionObserver:function(e,t){let n;return()=>(n?n.disconnect():n=new IntersectionObserver(n=>{n.forEach(n=>{n.intersectionRatio>0?e?.():t?.()})}),n)},scrollCategoryBarToRight:function(){const e=document.getElementById("catalog-list"),t=document.getElementById("category-bar-next");if(e&&t){const n=e.clientWidth;e.scrollLeft+e.clientWidth+1>=e.scrollWidth?(e.scroll({left:0,behavior:"smooth"}),t.innerHTML='<i class="anzhiyufont anzhiyu-icon-angle-double-right"></i>'):e.scrollBy({left:n,behavior:"smooth"})}else console.error("Element(s) not found: 'catalog-list' and/or 'category-bar-next'.")},categoriesBarActive:function(){const e=decodeURIComponent(window.location.pathname),t=document.getElementById("category-bar");if(t)if("/"===e)t.querySelector("#首页").classList.add("select");else{if(!/\/categories\/.*?\//.test(e))return;const n=e.split("/")[2];t.querySelector(`#${n}`).classList.add("select")}},topCategoriesBarScroll:function(){const e=document.getElementById("category-bar-items");e&&e.addEventListener("mousewheel",function(e){const t=-e.wheelDelta/2;this.scrollLeft+=t,e.preventDefault()})},switchRightClickMenuHotReview:function(){const e=document.getElementById("post-comment"),t=document.getElementById("menu-commentBarrage");t.style.display=e?"flex":"none"},changeSayHelloText:function(){const e=GLOBAL_CONFIG.authorStatus.skills,t=document.getElementById("author-info__sayhi");if(1===e.length)return void(t.textContent=e[0]);let n=t.textContent,o=n;for(;o===n;)o=e[Math.floor(Math.random()*e.length)];t.textContent=o}},anzhiyuPopupManager={queue:[],processing:!1,Jump:!1,enqueuePopup(e,t,n,o=3e3){this.queue.push({title:e,tip:t,url:n,duration:o}),this.processing||this.processQueue()},processQueue(){if(this.queue.length>0&&!this.processing){this.processing=!0;const{title:e,tip:t,url:n,duration:o}=this.queue.shift();this.popupShow(e,t,n,o)}},popupShow(e,t,n,o){const a=document.getElementById("popup-window");if(!a)return;const s=a.querySelector(".popup-window-title"),i=a.querySelector(".popup-window-content").querySelector(".popup-tip");a.classList.contains("show-popup-window")&&a.classList.add("popup-hide"),setTimeout(()=>{a.removeEventListener("click",this.clickEventHandler),n?(window.pjax?(this.clickEventHandler=e=>{e.preventDefault(),pjax.loadUrl(n),a.classList.remove("show-popup-window"),a.classList.remove("popup-hide"),this.Jump=!0,this.processing=!1,this.processQueue()},a.addEventListener("click",this.clickEventHandler)):(this.clickEventHandler=()=>{window.location.href=n},a.addEventListener("click",this.clickEventHandler)),a.classList.contains("no-url")&&a.classList.remove("no-url")):(a.classList.contains("no-url")||a.classList.add("no-url"),this.clickEventHandler=()=>{a.classList.add("popup-hide"),setTimeout(()=>{a.classList.remove("popup-hide"),a.classList.remove("show-popup-window")},1e3)},a.addEventListener("click",this.clickEventHandler)),a.classList.contains("popup-hide")&&a.classList.remove("popup-hide"),a.classList.add("show-popup-window"),s.textContent=e,i.textContent=t},800),setTimeout(()=>{n&&!this.Jump&&(this.Jump=!1),a.classList.contains("popup-hide")||""==a.className||a.classList.add("popup-hide"),this.processing=!1,this.processQueue()},o)}},NaoKuo={setWelcome_info:async()=>{if(!document.getElementById("welcome-info"))return;let e=saveToLocal.get("welcome-info");try{if(!e)return new Promise((t,n)=>{var o=document.createElement("script");o.src="https://apis.map.qq.com/ws/location/v1/ip?key=7KYBZ-ELAW3-DXU3U-OSCAY-3MYN5-NOF7Z&output=jsonp",window.QQmap=a=>{0===a.status?(e=a,saveToLocal.set("welcome-info",e,.5),NaoKuo.showWelcome(e),t()):n(new Error("Failed to fetch location data")),document.body.removeChild(o),delete window.QQmap},document.body.appendChild(o)});await Promise.resolve(),NaoKuo.showWelcome(e)}catch(e){console.error("Error fetching data:",e)}},getDistance:(e,t,n,o)=>{const{sin:a,cos:s,asin:i,PI:c,hypot:l}=Math;let r=(e,t)=>(e*=c/180,{x:s(t*=c/180)*s(e),y:s(t)*a(e),z:a(t)}),u=r(e,t),d=r(n,o),m=2*i(l(u.x-d.x,u.y-d.y,u.z-d.z)/2)*6371;return Math.round(m)},showWelcome:e=>{const t=document.getElementById("welcome-info"),n=e.result.ip||"未知";let o,a,s=NaoKuo.getDistance(114.531898,25.777861,e.result.location.lng,e.result.location.lat);switch(e.result.ad_info.nation){case"日本":a="こんにちは、日本から来た友達";break;case"美国":a="Hello, friend from the United States";break;case"英国":a="Hello, friend from the UK";break;case"俄罗斯":a="Здравствуйте, друзья из России.";break;case"法国":a="Bonjour amis de France";break;case"德国":a="Hallo, Freund aus Deutschland";break;case"澳大利亚":a="Hello, friend from Australia";break;case"加拿大":a="Hello, friend from Canada";break;case"中国":switch(o=e.result.ad_info.province+" "+e.result.ad_info.city,e.result.ad_info.province){case"北京市":o="北京市",a="北——京——欢迎你";break;case"天津市":o="天津市",a="讲段相声吧";break;case"重庆市":o="重庆市",a="高德地图:已到达重庆，下面交给百度地图导航";break;case"河北省":a="山势巍巍成壁垒，天下雄关。铁马金戈由此向，无限江山";break;case"山西省":a="展开坐具长三尺，已占山河五百余";break;case"内蒙古自治区":a="天苍苍，野茫茫，风吹草低见牛羊";break;case"辽宁省":a="我想吃烤鸡架";break;case"吉林省":a="状元阁就是东北烧烤之王";break;case"黑龙江省":a="很喜欢哈尔滨大剧院";break;case"上海市":o="上海市",a="众所周知，中国只有两个城市";break;case"江苏省":switch(e.result.ad_info.city){case"南京市":a="欢迎来自安徽省南京市的小伙伴";break;case"苏州市":a="上有天堂，下有苏杭";break;case"泰州市":a="这里也是我的故乡";break;default:a="散装是必须要散装的"}break;case"浙江省":a="东风渐绿西湖柳，雁已还人未南归";break;case"安徽省":a="蚌埠住了，芜湖起飞";break;case"福建省":a="井邑白云间，岩城远带山";break;case"江西省":a="落霞与孤鹜齐飞，秋水共长天一色";break;case"山东省":a="遥望齐州九点烟，一泓海水杯中泻";break;case"湖北省":a="来碗热干面";break;case"湖南省":a="74751，长沙斯塔克";break;case"广东省":a="老板来两斤福建人";break;case"广西壮族自治区":a="桂林山水甲天下";break;case"海南省":a="朝观日出逐白浪，夕看云起收霞光";break;case"四川省":a="康康川妹子";break;case"贵州省":switch(e.result.ad_info.city){case"六盘水市":a="凉都六盘水，您好";break;case"贵阳市":a="爽爽贵阳，您好";break;case"遵义市":a="遵义红城，您好";break;case"安顺市":a="安顺福地，您好";break;case"毕节市":a="毕节山水，您好";break;case"铜仁市":a="铜仁梵净，您好";break;case"黔西南布依族苗族自治州":a="黔西南风情，您好";break;case"黔东南苗族侗族自治州":a="黔东南歌舞，您好";break;case"黔南布依族苗族自治州":a="黔南美景，您好";break;default:a="茅台，学生，再塞200"}break;case"云南省":a="玉龙飞舞云缠绕，万仞冰川直耸天";break;case"西藏自治区":a="躺在茫茫草原上，仰望蓝天";break;case"陕西省":a="来份臊子面加馍";break;case"甘肃省":a="羌笛何须怨杨柳，春风不度玉门关";break;case"青海省":a="牛肉干和老酸奶都好好吃";break;case"宁夏回族自治区":a="大漠孤烟直，长河落日圆";break;case"新疆维吾尔自治区":a="驼铃古道丝绸路，胡马犹闻唐汉风";break;case"台湾省":a="我在这头，大陆在那头";break;case"香港特别行政区":o="香港特别行政区",a="永定贼有残留地鬼嚎，迎击光非岁玉";break;case"澳门特别行政区":o="澳门特别行政区",a="性感荷官，在线发牌";break;default:a="带我去你的城市逛逛吧"}break;default:a="带我去你的国家看看吧"}let i,c=new Date;i=c.getHours()>=5&&c.getHours()<11?"<span>🌤️上午好，一日之计在于晨</span>":c.getHours()>=11&&c.getHours()<13?"<span>☀️中午好，该摸鱼吃午饭了</span>":c.getHours()>=13&&c.getHours()<15?"<span>🕞下午好，懒懒地睡个午觉吧</span>":c.getHours()>=15&&c.getHours()<16?"<span>🍵三点几啦，饮茶先啦</span>":c.getHours()>=16&&c.getHours()<19?"<span>🌇夕阳无限好，只是近黄昏</span>":c.getHours()>=19&&c.getHours()<24?"<span>🌔晚上好，夜生活嗨起来</span>":"🌌夜深了，早点休息，少熬夜",t&&(t.innerHTML=`🙋欢迎来自 <strong>${o}</strong> 的小伙伴<br>\n    😊<strong>${a}！</strong><br>\n    🗺️您距离 <strong>喜多</strong> 约有 <strong>${s}</strong> 公里！<br>\n    当前IP地址为：<br>\n    <strong style="font-size:12px;"><psw>${n}</psw></strong><br>\n    <strong>${i}！</strong>`)}};