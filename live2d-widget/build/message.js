import{randomSelection}from"./utils.js";let messageTimer=null;function showMessage(e,t,s,r=!0){let i=parseInt(sessionStorage.getItem("waifu-message-priority"),10);if(isNaN(i)&&(i=0),!e||r&&i>s||!r&&i>=s)return;messageTimer&&(clearTimeout(messageTimer),messageTimer=null),e=randomSelection(e),sessionStorage.setItem("waifu-message-priority",String(s));const n=document.getElementById("waifu-tips");n.innerHTML=e,n.classList.add("waifu-tips-active"),messageTimer=setTimeout(()=>{sessionStorage.removeItem("waifu-message-priority"),n.classList.remove("waifu-tips-active")},t)}function welcomeMessage(e,t,s){if("/"===location.pathname)for(const{hour:t,text:s}of e){const e=new Date,r=t.split("-")[0],i=t.split("-")[1]||r;if(Number(r)<=e.getHours()&&e.getHours()<=Number(i))return s}const r=i18n(t,document.title);if(""!==document.referrer){const e=new URL(document.referrer);return location.hostname===e.hostname?r:`${i18n(s,e.hostname)}<br>${r}`}return r}function i18n(e,...t){return e.replace(/\$(\d+)/g,(e,s)=>{var r;const i=parseInt(s,10)-1;return null!==(r=t[i])&&void 0!==r?r:""})}export{showMessage,welcomeMessage,i18n};